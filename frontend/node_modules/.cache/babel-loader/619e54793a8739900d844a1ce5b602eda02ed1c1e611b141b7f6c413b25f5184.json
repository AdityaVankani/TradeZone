{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Paper,Tabs,Tab,Box,Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from'@mui/material';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`orders-tabpanel-${index}`,\"aria-labelledby\":`orders-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})});}const Orders=()=>{const[value,setValue]=useState(0);const[orders,setOrders]=useState([]);const{user}=useAuth();useEffect(()=>{fetchOrders();},[]);const fetchOrders=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('http://localhost:5000/api/orders',{headers:{Authorization:`Bearer ${token}`}});setOrders(response.data);}catch(error){console.error('Error fetching orders:',error);}};const handleTabChange=(event,newValue)=>{setValue(newValue);};const filterOrdersByStatus=status=>{return orders.filter(order=>order.status===status);};const renderOrdersTable=filteredOrders=>/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Stock\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Type\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Quantity\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Date\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredOrders.map(order=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:order.stock_symbol}),/*#__PURE__*/_jsx(TableCell,{children:order.type}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:order.quantity}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[\"$\",order.price.toFixed(2)]}),/*#__PURE__*/_jsx(TableCell,{children:order.status}),/*#__PURE__*/_jsx(TableCell,{children:new Date(order.created_at).toLocaleDateString()})]},order.id))})]})});return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,sx:{mt:4},children:\"My Orders\"}),/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%',mt:3},children:[/*#__PURE__*/_jsxs(Tabs,{value:value,onChange:handleTabChange,indicatorColor:\"primary\",textColor:\"primary\",centered:true,children:[/*#__PURE__*/_jsx(Tab,{label:\"Pending Orders\"}),/*#__PURE__*/_jsx(Tab,{label:\"Completed Orders\"}),/*#__PURE__*/_jsx(Tab,{label:\"Cancelled Orders\"})]}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:0,children:renderOrdersTable(filterOrdersByStatus('pending'))}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:1,children:renderOrdersTable(filterOrdersByStatus('completed'))}),/*#__PURE__*/_jsx(TabPanel,{value:value,index:2,children:renderOrdersTable(filterOrdersByStatus('cancelled'))})]})]});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Paper","Tabs","Tab","Box","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","axios","useAuth","jsx","_jsx","jsxs","_jsxs","TabPanel","props","children","value","index","other","role","hidden","id","sx","p","Orders","setValue","orders","setOrders","user","fetchOrders","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","handleTabChange","event","newValue","filterOrdersByStatus","status","filter","order","renderOrdersTable","filteredOrders","component","align","map","stock_symbol","type","quantity","price","toFixed","Date","created_at","toLocaleDateString","variant","gutterBottom","mt","width","onChange","indicatorColor","textColor","centered","label"],"sources":["D:/Chesax/chesa-stock-exchange/chesa-stock-exchange/frontend/src/pages/Orders.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Typography,\n  Paper,\n  Tabs,\n  Tab,\n  Box,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\nimport axios from 'axios';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface Order {\n  id: string;\n  stock_symbol: string;\n  type: 'buy' | 'sell';\n  quantity: number;\n  price: number;\n  status: 'pending' | 'completed' | 'cancelled';\n  created_at: string;\n}\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`orders-tabpanel-${index}`}\n      aria-labelledby={`orders-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst Orders = () => {\n  const [value, setValue] = useState(0);\n  const [orders, setOrders] = useState<Order[]>([]);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    fetchOrders();\n  }, []);\n\n  const fetchOrders = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:5000/api/orders', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setOrders(response.data);\n    } catch (error) {\n      console.error('Error fetching orders:', error);\n    }\n  };\n\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\n    setValue(newValue);\n  };\n\n  const filterOrdersByStatus = (status: 'pending' | 'completed' | 'cancelled') => {\n    return orders.filter(order => order.status === status);\n  };\n\n  const renderOrdersTable = (filteredOrders: Order[]) => (\n    <TableContainer component={Paper}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Stock</TableCell>\n            <TableCell>Type</TableCell>\n            <TableCell align=\"right\">Quantity</TableCell>\n            <TableCell align=\"right\">Price</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell>Date</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {filteredOrders.map((order) => (\n            <TableRow key={order.id}>\n              <TableCell>{order.stock_symbol}</TableCell>\n              <TableCell>{order.type}</TableCell>\n              <TableCell align=\"right\">{order.quantity}</TableCell>\n              <TableCell align=\"right\">${order.price.toFixed(2)}</TableCell>\n              <TableCell>{order.status}</TableCell>\n              <TableCell>\n                {new Date(order.created_at).toLocaleDateString()}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom sx={{ mt: 4 }}>\n        My Orders\n      </Typography>\n      <Paper sx={{ width: '100%', mt: 3 }}>\n        <Tabs\n          value={value}\n          onChange={handleTabChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          centered\n        >\n          <Tab label=\"Pending Orders\" />\n          <Tab label=\"Completed Orders\" />\n          <Tab label=\"Cancelled Orders\" />\n        </Tabs>\n\n        <TabPanel value={value} index={0}>\n          {renderOrdersTable(filterOrdersByStatus('pending'))}\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          {renderOrdersTable(filterOrdersByStatus('completed'))}\n        </TabPanel>\n        <TabPanel value={value} index={2}>\n          {renderOrdersTable(filterOrdersByStatus('cancelled'))}\n        </TabPanel>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Orders;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}