{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Card,CardContent,Grid,Box,TextField,Button}from'@mui/material';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const News=()=>{const{user}=useAuth();const[news,setNews]=useState([]);const[title,setTitle]=useState('');const[content,setContent]=useState('');useEffect(()=>{fetchNews();},[]);const fetchNews=async()=>{try{const response=await axios.get('http://localhost:5000/api/news');setNews(response.data);}catch(error){console.error('Error fetching news:',error);}};const handleSubmitNews=async e=>{e.preventDefault();try{await axios.post('http://localhost:5000/api/news',{title,content});setTitle('');setContent('');fetchNews();}catch(error){console.error('Error creating news:',error);}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Market News\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleSubmitNews,sx:{mb:4},children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Create News\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Title\",value:title,onChange:e=>setTitle(e.target.value),margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Content\",value:content,onChange:e=>setContent(e.target.value),margin:\"normal\",required:true,multiline:true,rows:4}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",sx:{mt:2},children:\"Publish News\"})]})})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:news.map(item=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:item.title}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:new Date(item.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:item.content})]})})},item.id))})]});};export default News;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Card","CardContent","Grid","Box","TextField","Button","useAuth","axios","jsx","_jsx","jsxs","_jsxs","News","user","news","setNews","title","setTitle","content","setContent","fetchNews","response","get","data","error","console","handleSubmitNews","e","preventDefault","post","children","variant","gutterBottom","role","component","onSubmit","sx","mb","fullWidth","label","value","onChange","target","margin","required","multiline","rows","type","color","mt","container","spacing","map","item","xs","Date","created_at","toLocaleDateString","id"],"sources":["D:/Chesax/chesa-stock-exchange/chesa-stock-exchange/frontend/src/pages/News.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Box,\n  TextField,\n  Button,\n} from '@mui/material';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\n\ninterface NewsItem {\n  id: string;\n  title: string;\n  content: string;\n  created_at: string;\n}\n\nconst News = () => {\n  const { user } = useAuth();\n  const [news, setNews] = useState<NewsItem[]>([]);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n\n  useEffect(() => {\n    fetchNews();\n  }, []);\n\n  const fetchNews = async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/api/news');\n      setNews(response.data);\n    } catch (error) {\n      console.error('Error fetching news:', error);\n    }\n  };\n\n  const handleSubmitNews = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await axios.post('http://localhost:5000/api/news', {\n        title,\n        content,\n      });\n      setTitle('');\n      setContent('');\n      fetchNews();\n    } catch (error) {\n      console.error('Error creating news:', error);\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\" gutterBottom>\n        Market News\n      </Typography>\n\n      {user?.role === 'admin' && (\n        <Box component=\"form\" onSubmit={handleSubmitNews} sx={{ mb: 4 }}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Create News\n              </Typography>\n              <TextField\n                fullWidth\n                label=\"Title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                margin=\"normal\"\n                required\n              />\n              <TextField\n                fullWidth\n                label=\"Content\"\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                margin=\"normal\"\n                required\n                multiline\n                rows={4}\n              />\n              <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                sx={{ mt: 2 }}\n              >\n                Publish News\n              </Button>\n            </CardContent>\n          </Card>\n        </Box>\n      )}\n\n      <Grid container spacing={3}>\n        {news.map((item) => (\n          <Grid item xs={12} key={item.id}>\n            <Card>\n              <CardContent>\n                <Typography variant=\"h6\" gutterBottom>\n                  {item.title}\n                </Typography>\n                <Typography color=\"textSecondary\" gutterBottom>\n                  {new Date(item.created_at).toLocaleDateString()}\n                </Typography>\n                <Typography variant=\"body1\">{item.content}</Typography>\n              </CardContent>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n    </Container>\n  );\n};\n\nexport default News;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}